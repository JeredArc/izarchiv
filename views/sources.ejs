<div class="list-page">
	<h2>Quellen</h2>
	
	<!-- Control buttons -->
	<div class="list-controls">
		<div class="list-info">
			<p>Zeige <%= sources.length %> von <%= pagination.total %> Quellen</p>
		</div>
	</div>
	
	<div class="table-container">
		<table class="list-table">
			<thead>
				<tr>
					<th><div class="th-content">#</div></th>
					<th><div class="th-content">Zeit</div></th>
					<th><div class="th-content">Typ</div></th>
					<th><div class="th-content">Dateiname</div></th>
					<th><div class="th-content">Als fertig (rdy) markiert</div></th>
					<th><div class="th-content">Messwerte</div></th>
				</tr>
			</thead>
			<tbody>
				<% sources.forEach(source => { %>
					<tr>
						<td><a href="/source/<%= source.id %>"><%= source.id %></a></td>
						<td class="timestamp"><span><%- formatDate(source.created_at, defaultUiDateFormat) %></span></td>
						<td><span><%= source.type %></span></td>
						<td><span><%= source.filename %></span></td>
						<td><span><%= source.rdysent ? '✓' : '✗' %></span></td>
						<td class="number"><span><%= source.recordCount %></span></td>
					</tr>
				<% }); %>
			</tbody>
		</table>
	</div>

	<!-- Bottom bar with info and pagination -->
	<div class="list-bottom-bar">
		<% if (pagination.totalPages > 1) { %>
			<div class="pagination">
				<% if (pagination.currentPage > 1) { %>
					<a href="/sources?page=1" class="pagination-link">&laquo;</a>
					<a href="/sources?page=<%= pagination.currentPage - 1 %>" class="pagination-link">&lsaquo;</a>
				<% } %>
				
				<% for (let i = Math.max(1, pagination.currentPage - 2); i <= Math.min(pagination.totalPages, pagination.currentPage + 2); i++) { %>
					<a href="/sources?page=<%= i %>" class="pagination-link <%= i === pagination.currentPage ? 'active' : '' %>"><%= i %></a>
				<% } %>
				
				<% if (pagination.currentPage < pagination.totalPages) { %>
					<a href="/sources?page=<%= pagination.currentPage + 1 %>" class="pagination-link">&rsaquo;</a>
					<a href="/sources?page=<%= pagination.totalPages %>" class="pagination-link">&raquo;</a>
				<% } %>
			</div>
		<% } else { %>
			<div class="pagination"></div> <!-- Empty div to maintain flex layout -->
		<% } %>
	</div>
</div> 