<div class="devices-page">
	<h2>Geräte</h2>
	
	<div class="records-info">
		<p>Zeige <%= devices.length %> von <%= pagination.total %> Geräten</p>
	</div>
	
	<table>
		<thead>
			<tr>
				<th>#</th>
				<th>Adresse</th>
				<th>Name</th>
				<th>Beschreibung</th>
				<th>Messwerte</th>
				<th>Erstellt am</th>
			</tr>
		</thead>
		<tbody>
			<% devices.forEach(device => { %>
				<tr>
					<td><a href="/device/<%= device.id %>"><%= device.id %></a></td>
					<td><%= device.address %></td>
					<td><%= device.name %></td>
					<td><%= device.description || '' %></td>
					<td><%= device.recordCount %></td>
					<td class="timestamp"><%- formatDate(device.created_at, defaultUiDateFormat) %></td>
				</tr>
			<% }); %>
		</tbody>
	</table>

	<% if (pagination.totalPages > 1) { %>
		<div class="pagination">
			<% if (pagination.currentPage > 1) { %>
				<a href="/devices?page=1" class="pagination-link">&laquo;</a>
				<a href="/devices?page=<%= pagination.currentPage - 1 %>" class="pagination-link">&lsaquo;</a>
			<% } %>
			
			<% for (let i = Math.max(1, pagination.currentPage - 2); i <= Math.min(pagination.totalPages, pagination.currentPage + 2); i++) { %>
				<a href="/devices?page=<%= i %>" class="pagination-link <%= i === pagination.currentPage ? 'active' : '' %>"><%= i %></a>
			<% } %>
			
			<% if (pagination.currentPage < pagination.totalPages) { %>
				<a href="/devices?page=<%= pagination.currentPage + 1 %>" class="pagination-link">&rsaquo;</a>
				<a href="/devices?page=<%= pagination.totalPages %>" class="pagination-link">&raquo;</a>
			<% } %>
		</div>
	<% } %>
</div> 